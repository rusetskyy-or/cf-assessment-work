{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"workspaceName":{"type":"string","metadata":"Workspace name","defaultValue":"synapsesuffix"},"synapsesuffix-WorkspaceDefaultStorage":{"type":"string"}},"variables":{"workspaceId":"[concat('Microsoft.Synapse/workspaces/', parameters('workspaceName'))]"},"resources":[{"name":"[concat(parameters('workspaceName'), '/Unzip Data')]","type":"Microsoft.Synapse/workspaces/pipelines","apiVersion":"2019-06-01-preview","properties":{"description":"Pipeline to unzip Data.zip file","activities":[{"name":"Unzip Data","type":"Copy","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"source":{"type":"BinarySource","storeSettings":{"type":"AzureBlobFSReadSettings","recursive":true},"formatSettings":{"type":"BinaryReadSettings","compressionProperties":{"type":"ZipDeflateReadSettings","preserveZipFileNameAsFolder":false}}},"sink":{"type":"BinarySink","storeSettings":{"type":"AzureBlobFSWriteSettings"}},"enableStaging":false},"inputs":[{"referenceName":"dsZipFile","type":"DatasetReference","parameters":{"fileName":"Data.zip"}}],"outputs":[{"referenceName":"dsBinaryGeneric","type":"DatasetReference","parameters":{"containerName":"files","folderName":"data"}}]}],"policy":{"elapsedTimeMetric":{},"cancelAfter":{}},"annotations":[]},"dependsOn":["[concat(variables('workspaceId'), '/datasets/dsZipFile')]","[concat(variables('workspaceId'), '/datasets/dsBinaryGeneric')]"]},{"name":"[concat(parameters('workspaceName'), '/dsZipFile')]","type":"Microsoft.Synapse/workspaces/datasets","apiVersion":"2019-06-01-preview","properties":{"linkedServiceName":{"referenceName":"[parameters('synapsesuffix-WorkspaceDefaultStorage')]","type":"LinkedServiceReference"},"parameters":{"containerName":{"type":"string","defaultValue":"files"},"fileName":{"type":"String","defaultValue":"Data.zip"}},"annotations":[],"type":"Binary","typeProperties":{"location":{"type":"AzureBlobFSLocation","fileName":{"value":"@dataset().fileName","type":"Expression"},"fileSystem":{"value":"@dataset().containerName","type":"Expression"}},"compression":{"type":"ZipDeflate","level":"Optimal"}}},"dependsOn":[]},{"name":"[concat(parameters('workspaceName'), '/dsBinaryGeneric')]","type":"Microsoft.Synapse/workspaces/datasets","apiVersion":"2019-06-01-preview","properties":{"linkedServiceName":{"referenceName":"[parameters('synapsesuffix-WorkspaceDefaultStorage')]","type":"LinkedServiceReference"},"parameters":{"containerName":{"type":"String","defaultValue":"files"},"folderName":{"type":"String","defaultValue":"data"}},"annotations":[],"type":"Binary","typeProperties":{"location":{"type":"AzureBlobFSLocation","folderPath":{"value":"@dataset().folderName","type":"Expression"},"fileSystem":{"value":"@dataset().containerName","type":"Expression"}}}},"dependsOn":[]}]}